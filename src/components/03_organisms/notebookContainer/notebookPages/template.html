<div>
  <div
    class="pageDisplay"
    v-for="(page, index) in list"
    :key="index"
    :class="[ index == currentEntry ? 'np-front' : '',
              index == currentEntry + 1 ? 'np-middle' : '',
              index == currentEntry - 1 ? 'np-back' : '',
              index == currentEntry - 1 && currentEntry == list.length - 1 ? 'np-middle' : ''
            ]">
    <!-- Notebook page header -->
    <div class="notebook-header col-xs-10 col-xs-offset-1">
      <vue-markdown class="title" :source="page.title" />
      <div class="icon" @click="toggleScroll">
        <SvgIcon name="dot-hamburger" customColor="#8C8B89" />
      </div>
    </div>
    <!-- Notebook page body -->
    <div class="mb-40 col-xs-10 col-xs-offset-1">
      <div v-if="page.image" class="notebook-page-image">
        <div class="image-sticker"></div>
        <img :src="`${resourcesPath}${page.image.path}`" />
        <vue-markdown class="image-caption" v-if="page.caption" :source="page.caption" />
      </div>
      <div class="notebook-page-text">
        <vue-markdown v-if="page.text" :source="page.text" />
      </div>
      <!-- Personal notes -->
      <div class="pt-40 border-top">
        <ul>
          <li 
            v-for="(personalNote, index) in page.personalNotes"
            :key="index"
            v-if="page.personalNotes.length > 0">
              <div class="added-personal-notes-box mb-40">
                <p>20.5.2018 - 10:32 - {{ page.title }}</p>
                <textarea readonly>{{ personalNote.markdownContent }}</textarea>
              </div>
          </li>
        </ul>
      </div>
      <!-- Add personal note box -->
      <div class="personal-note-box font pt-40" :class="openedPersonalNote ? 'active' : ''">
        <div class="note" :class="noteChanged ? 'active' : ''">
          <p>20.5.2018 - 10:48 - {{ page.title }}</p>
          <textarea
            :readonly="noteChanged"
            @focus="changePersonalNote(true)"
            @blur="changePersonalNote(false)"
            v-model="personalNoteText"
            v-on:keyup="checkTyping"></textarea>
        </div>
        <!-- Typing -->
        <div v-if="personalNoteText != '' && !isAutosaved">
          <div class="small go-right typing">Typing...</div>
        </div>
        <div v-if="personalNoteText != '' && isAutosaved">
          <SvgIcon class="icon go-right" customColor="#8C8B89" name="check" />
          <div class="small go-right autosaved">Autosaved</div>
        </div>
      </div>
      <Btn
        @click.native="addPersonalNote(page.id)"
        class="button-personal-note"
        :class="openedPersonalNote ? 'active' : ''"
        text="Create new note"
        iconColor="#fff"
        primary="true"
        iconName="plus" />
    </div>
  </div>
</div>