<div>
  <div
    class="pageDisplay"
    v-for="(page, index) in list" 
    :key="index"
    :class="[ index == currentEntry ? 'np-front' : '',
              index == currentEntry + 1 ? 'np-middle' : '',
              index == currentEntry - 1 ? 'np-back' : '',
              index == currentEntry - 1 && currentEntry == list.length - 1 ? 'np-middle' : ''
            ]">
    <!-- Notebook page header -->
    <div class="notebook-header col-xs-10 col-xs-offset-1">
      <vue-markdown class="title" :source="page.title" />
      <div class="icon" @click="toggleScroll">
        <svgIcon name="dot-hamburger" sizeH="20px" />
      </div>
    </div>
    <!-- Notebook page body -->
    <div class="mb-40 col-xs-10 col-xs-offset-1">
      <div v-if="page.image" class="notebook-page-image">
        <div class="image-sticker"></div>
        <img :src="`http://localhost:8080/${page.image.path}`" />
        <vue-markdown class="image-caption" v-if="page.caption" :source="page.caption" />
      </div>
      <div class="notebook-page-text">
        <vue-markdown v-if="page.text" :source="page.text" />
      </div>
      <!-- Personal notes -->
      <div class="pt-40 border-top">
        <ul>
          <li 
            v-for="(personalNote, index) in page.personalNotes" 
            :key="index"
            v-if="page.personalNotes.length > 0">
              <div class="added-personal-notes-box mb-40">
                <!-- <p style="visibility: visible">20.5.2018 - 10:48 - Spreckensville</p> -->
                <textarea>{{ personalNote.markdownContent }}</textarea>
              </div>
          </li>
        </ul>
      </div>
      <!-- Add personal note box -->
      <div class="personal-note-box" :class="openedPersonalNote ? 'opened' : 'not-displayed'">
        <!-- <p style="visibility: visible">20.5.2018 - 10:48 - Spreckensville</p> -->
        <textarea
          :class="openedPersonalNote ? 'active' : ''"
          v-model="personalNoteText"
          v-on:keyup="checkTyping"
          @keydown="textareaHandler"></textarea>
        <!-- Typing -->
        <div v-if="personalNoteText != '' && !readyForSubmit">
          <div class="small go-right typing">Typing...</div>
        </div>
        <div v-if="personalNoteText != '' && readyForSubmit">
          <div class="small go-right enter-to-submit">Press Enter to submit note</div>
        </div>
      </div>
      <Btn
        @click.native="addPersonalNote(page.id)"
        class="button-personal-note"
        :class="openedPersonalNote ? 'inactive' : ''"
        text="Create new note"
        primary="true"
        iconName="plus"
        iconColor="white" />
    </div>
  </div>
</div>