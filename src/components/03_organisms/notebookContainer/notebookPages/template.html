<div>
  <div
    class="pageDisplay"
    v-for="(page, index) in list"
    :key="index"
    :class="[ index == currentEntry ? 'np-front' : '',
              index == currentEntry + 1 ? 'np-middle' : '',
              index == currentEntry - 1 ? 'np-back' : '',
              index == currentEntry - 1 && currentEntry == list.length - 1 ? 'np-middle' : ''
            ]">
    <!-- Notebook page header -->
    <div class="notebook-header col-xs-10 col-xs-offset-1">
      <vue-markdown class="title" :source="page.title" />
      <div class="icon" @click="toggleScroll">
        <SvgIcon name="dot-hamburger" customColor="#8C8B89" />
      </div>
    </div>
    <div
      v-for="(component, index) in page.notebookContent"
      :key="index"
      class="mb-40 col-xs-10 col-xs-offset-1">
      <!-- Image Component -->
      <div
        v-if="component.type == 'ImageComponent'"
        class="notebook-page-image">
        <div>
          <div class="image-sticker"></div>
          <img :src="`${resourcesPath}${component.component.images[0].path}`" />
          <vue-markdown class="image-caption" v-if="component.component.caption" :source="component.component.caption" />
        </div>
      </div>
      <!-- Text Exercise Component -->
      <div
        v-if="component.type == 'TextExercise'"
        class="notebook-page-text-exercise">
        <div>
          <div class="title">My Answer</div>
          <!-- <div class="question small">Insert the question here?</div>
          <div class="text-sticker"></div> -->
          <vue-markdown class="text-exercise-answer" v-if="component.exerciseState.formatedInput" :source="component.exerciseState.formatedInput" />
        </div>
      </div>
      <!-- Text Component -->
      <div
        v-if="component.type == 'TextComponent'"
        class="notebook-page-text">
        <vue-markdown :source="component.component.markdownContent" />
      </div>
      <!-- Mail Response Component -->
      <div
        v-if="component.hasOwnProperty('mailState')"
        class="notebook-mail-response">
        <div v-for="(reply, index) in component.mailState.mailReplyList" :key="index">
            <div class="title">{{component.mailState.mail.subject}}</div>
            <div class="sticker"></div>
          <div class="notebook-mail-reply-message">{{ reply.body }}</div>
        </div>
      </div>
      <!-- Radio Field Component -->
      <div v-if="component.type == 'RadioFieldComponent'" class="notebook-radio-field">
        <div class="title">My Choice</div>
        <div class="question small">{{ component.component.question }}</div>
        <div v-for="(item, index) in radioOptions" :key="index">
          <div class="notebook-radio-field-item">
            {{ item.markdownContent }}
            <div v-if="item.chosen" class="correct">
              <!-- width of circle is not dynamic but fixed -->
              <SvgIcon name="correct-answer" />
            </div>
            <div v-if="!item.chosen" class="incorrect">
              <!-- width of line is not dynamic but fixed -->
              <SvgIcon name="incorrect-answer" />
            </div>
          </div>
        </div>
      </div>
      <!-- Checkbox Field Component -->
      <div v-if="component.type == 'CheckboxFieldComponent'" class="notebook-checkbox-field">
        <div class="title">My Choice</div>
        <div class="question small">{{ component.component.question }}</div>
        <div v-for="(item, index) in checkboxOptions" :key="index">
          <div class="notebook-checkbox-field-item">
            {{ item.markdownContent }}
            <div v-if="item.chosen" class="correct">
              <!-- width of circle is not dynamic but fixed -->
              <SvgIcon name="correct-answer" />
            </div>
            <div v-if="!item.chosen" class="incorrect">
              <!-- width of line is not dynamic but fixed -->
              <SvgIcon name="incorrect-answer" />
            </div>
          </div>
        </div>
      </div>
      <!-- Documents Upload Component -->
      <div v-if="component.type == 'DocumentsUploadComponent'" class="notebook-documents-upload">
        <div class="title">My Output</div>
        <div class="question small">Upload your results</div>
        <div v-for="(doc, index) in documentUploads" :key="index" class="notebook-document-item">
          <div class="document-type">
            {{ doc.type }}
          </div>
          <div class="document-title small">
            {{ doc.title }}
          </div>
        </div>
      </div>
      <!-- Personal Note -->
      <div
        v-if="component.type == 'PersonalNote'"
        class="added-personal-notes-box mb-40">
        <p>20.5.2018 - 10:32 - {{ page.title }}</p>
        <vue-markdown :source="component.personalNote.markdownContent" />
      </div>
    </div>
    <!-- Personal notes list -->
    <div class="personal-note-box font pt-40 col-xs-10 col-xs-offset-1" :class="openedPersonalNote ? 'active' : ''">
      <div class="note" :class="noteChanged ? 'active' : ''">
        <p>20.5.2018 - 10:48 - {{ page.title }}</p>
        <textarea
          :readonly="noteChanged"
          @focus="changePersonalNote(true)"
          @blur="changePersonalNote(false)"
          v-model="personalNoteText"
          v-on:keyup="checkTyping"></textarea>
      </div>
      <div v-if="personalNoteText != '' && !isAutosaved">
        <div class="small go-right typing">Typing...</div>
      </div>
      <div v-if="personalNoteText != '' && isAutosaved">
        <svgIcon class="icon go-right" customColor="#8C8B89" name="check" />
        <div class="small go-right autosaved">Autosaved</div>
      </div>
    </div>
    <!-- Create personal note button -->
    <div class="col-xs-10 col-xs-offset-1 mb-50">
      <Btn
        @click.native="addPersonalNote(page.id)"
        class="button-personal-note"
        :class="openedPersonalNote ? 'active' : ''"
        text="Create new note"
        iconColor="#fff"
        primary="true"
        iconName="plus" />
    </div>
  </div>
</div>